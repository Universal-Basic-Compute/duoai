<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; connect-src 'self' https://duoai.vercel.app https://api.anthropic.com https://api.elevenlabs.io https://api.openai.com;">
    <title>DuoAI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <div class="login-header">
                <h1>DuoAI</h1>
                <p>Your Intelligent Gaming Companion</p>
            </div>
            <button id="googleLoginButton" class="google-login-button">
                <img src="images/google-logo.svg" alt="Google" class="google-icon">
                Sign in with Google
            </button>
        </div>
    </div>
    <div class="menu-tab" id="menuTab">
        <div class="tab-handle">≡</div>
    </div>
    
    <div class="side-menu" id="sideMenu">
        <div class="menu-header">
            <h1>DuoAI</h1>
        </div>
        <div class="menu-content">
            <button id="startButton" class="primary-button">Start</button>
            <button id="charactersButton" class="secondary-button">Characters</button>
            <button id="logoutButton" class="secondary-button logout-button">Logout</button>
        </div>
    </div>

    <div class="submenu" id="charactersSubmenu">
        <div class="submenu-header">
            <button id="backButton" class="back-button">←</button>
            <h2>Characters</h2>
        </div>
        <div class="character-list">
            <div class="character-item">
                <div class="character-name">Nova</div>
                <div class="character-desc">Analytical and supportive, helps you optimize strategies and learn from mistakes</div>
            </div>
            <div class="character-item">
                <div class="character-name">Orion</div>
                <div class="character-desc">Motivational coach who pushes your limits and celebrates your achievements</div>
            </div>
            <div class="character-item">
                <div class="character-name">Lyra</div>
                <div class="character-desc">Patient teacher who explains complex game mechanics in simple terms</div>
            </div>
            <div class="character-item">
                <div class="character-name">Zephyr</div>
                <div class="character-desc">Playful companion who keeps sessions light and entertaining with humor</div>
            </div>
            <div class="character-item">
                <div class="character-name">Thorne</div>
                <div class="character-desc">Protective mentor who helps you navigate challenging game situations</div>
            </div>
        </div>
    </div>

    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <div class="selected-character" id="selectedCharacter">
                <div class="character-avatar">AI</div>
                <div class="character-info">Select a character</div>
            </div>
            <button id="closeChatButton" class="close-button">×</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">Select a character and click Start to begin</div>
        </div>
        <div class="audio-controls">
          <div class="volume-control">
            <svg class="volume-icon" viewBox="0 0 24 24" width="18" height="18">
              <path fill="currentColor" d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"/>
            </svg>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.5" class="slider">
          </div>
          <div class="voice-selector">
            <select id="voiceSelector" class="voice-select">
              <option value="JBFqnCBsd6RMkjVDRZzb">Rachel</option>
              <option value="pNInz6obpgDQGcFmaJgB">Adam</option>
              <option value="21m00Tcm4TlvDq8ikWAM">Sam</option>
              <option value="AZnzlk1XvdvUeBnXmlld">Domi</option>
              <option value="EXAVITQu4vr4xnSDxMaL">Bella</option>
            </select>
          </div>
          <div class="speech-controls">
            <button id="micButton" class="mic-button">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor" d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
              </svg>
            </button>
            <span id="speechStatus" class="speech-status"></span>
          </div>
        </div>
        <div class="chat-input-container">
            <textarea id="userInput" class="chat-input" placeholder="Type your message..."></textarea>
            <button id="sendButton" class="send-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>

    <div class="network-status" id="networkStatus">You are offline</div>
    <style>
        .message.typing::after {
            content: "";
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #7e57c2;
            border-radius: 50%;
            margin-left: 5px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .cached-indicator {
            font-size: 0.7rem;
            color: #888;
            margin-bottom: 4px;
            background-color: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            display: inline-block;
        }
    </style>
    <script src="renderer.js"></script>
</body>
</html>
